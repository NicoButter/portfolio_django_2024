{% extends 'main/base.html' %}

{% block title %}Contacto{% endblock %}

{% block content %}
<h1 class="contacto-heading">Contactame!!</h1>
<form id="contact-form" action="https://formspree.io/f/movaerny" method="POST" class="contacto-form">
    <label for="name" class="contacto-label">Nombre:</label>
    <input type="text" id="name" name="name" class="contacto-input" required>
    
    <label for="email" class="contacto-label">Correo Electrónico:</label>
    <input type="email" id="email" name="email" class="contacto-input" required>
    
    <label for="message" class="contacto-label">Mensaje:</label>
    <textarea id="message" name="message" class="contacto-textarea" required></textarea>
    
    <button type="submit" class="contacto-button">Enviar</button>
</form>

<p id="form-response" class="exito" style="display: none;"></p>

<script>
    document.getElementById('contact-form').addEventListener('submit', function(event) {
        event.preventDefault(); 
        
        var form = event.target;
        var formData = new FormData(form);
        
        fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
                'Accept': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('form-response').innerText = '¡Tu mensaje ha sido enviado con éxito!';
            document.getElementById('form-response').classList.add('exito');
            document.getElementById('form-response').style.display = 'block';
            
            form.reset();
          })
          .catch(error => {
            document.getElementById('form-response').innerText = 'Hubo un problema al enviar el mensaje.';
            document.getElementById('form-response').classList.add('error');
            document.getElementById('form-response').style.display = 'block';
          });
    });
    </script>

{% endblock %}
